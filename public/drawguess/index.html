<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>🎨 你画我猜</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <!-- 首页 - 创建/加入房间 -->
    <div id="home-screen" class="screen active">
      <div class="container">
        <h1 class="title">🎨 你画我猜</h1>
        <p class="subtitle">一人画，大家猜</p>
        
        <div class="input-group">
          <input type="text" id="player-name" placeholder="输入你的昵称" maxlength="10">
        </div>
        
        <div class="button-group">
          <button id="create-room-btn" class="btn btn-primary">创建房间</button>
          <button id="join-room-btn" class="btn btn-secondary">加入房间</button>
        </div>
        
        <div id="join-room-form" class="hidden">
          <div class="input-group">
            <input type="text" id="room-code" placeholder="输入房间号" maxlength="6">
          </div>
          <button id="confirm-join-btn" class="btn btn-primary">确认加入</button>
        </div>
        
        <a href="/" class="back-link">← 返回游戏大厅</a>
      </div>
    </div>
    
    <!-- 等待室 -->
    <div id="lobby-screen" class="screen">
      <div class="container">
        <div class="room-header">
          <h2>房间号: <span id="room-id-display"></span></h2>
          <button id="copy-room-id" class="btn btn-small">复制</button>
        </div>
        
        <div class="game-settings">
          <h3>游戏设置</h3>
          <div class="setting-item">
            <label>每轮时间:</label>
            <select id="round-time">
              <option value="60">60秒</option>
              <option value="90">90秒</option>
              <option value="120">120秒</option>
            </select>
          </div>
          <div class="setting-item">
            <label>总轮数:</label>
            <select id="total-rounds">
              <option value="2">2轮</option>
              <option value="3" selected>3轮</option>
              <option value="5">5轮</option>
            </select>
          </div>
        </div>
        
        <div class="players-section">
          <h3>玩家列表 (<span id="player-count">0</span>/8)</h3>
          <ul id="players-list"></ul>
        </div>
        
        <div id="host-controls" class="hidden">
          <button id="start-game-btn" class="btn btn-primary btn-large">开始游戏</button>
        </div>
        
        <p id="waiting-message" class="info-text">等待房主开始游戏...</p>
      </div>
    </div>
    
    <!-- 游戏界面 -->
    <div id="game-screen" class="screen">
      <!-- 顶部信息栏 -->
      <div class="game-header">
        <span class="round-info">第<span id="current-round">1</span>/<span id="total-rounds-display">3</span>轮</span>
        <span id="drawer-name">等待中...</span>
        <span class="timer" id="timer">60</span>
      </div>
      
      <!-- 词语提示 -->
      <div class="word-area">
        <span id="word-hint" class="word-hint"></span>
      </div>
      
      <!-- 画板区域 -->
      <div class="canvas-container">
        <canvas id="draw-canvas"></canvas>
      </div>
      
      <!-- 画笔工具栏（只有画手可见） -->
      <div id="draw-tools" class="draw-tools hidden">
        <div class="tools-row">
          <div class="color-picker">
            <div class="color-btn active" data-color="#000000" style="background:#000"></div>
            <div class="color-btn" data-color="#e74c3c" style="background:#e74c3c"></div>
            <div class="color-btn" data-color="#3498db" style="background:#3498db"></div>
            <div class="color-btn" data-color="#2ecc71" style="background:#2ecc71"></div>
            <div class="color-btn" data-color="#f39c12" style="background:#f39c12"></div>
            <div class="color-btn" data-color="#9b59b6" style="background:#9b59b6"></div>
          </div>
          <div class="tool-buttons">
            <button id="eraser-btn" class="tool-btn" title="橡皮擦">🧹</button>
            <button id="clear-canvas-btn" class="tool-btn" title="清空">🗑️</button>
          </div>
        </div>
        <div class="tools-row">
          <span class="size-label">粗细</span>
          <input type="range" id="brush-size" min="2" max="20" value="5">
        </div>
      </div>
      
      <!-- 猜词输入区 -->
      <div class="guess-area">
        <div id="chat-messages" class="chat-messages"></div>
        <div class="chat-input-area">
          <input type="text" id="guess-input" placeholder="输入你的答案..." maxlength="20">
          <button id="send-guess-btn" class="btn btn-primary">发送</button>
        </div>
      </div>
      
      <!-- 积分按钮 -->
      <button id="show-scores-btn" class="scores-fab">📊</button>
      
      <!-- 回合结束弹窗 -->
      <div id="round-result" class="modal hidden">
        <div class="modal-content">
          <h3 id="result-title">⏰ 时间到！</h3>
          <p id="result-word">答案是: <span></span></p>
          <div id="result-scores"></div>
        </div>
      </div>
      
      <!-- 游戏结束弹窗 -->
      <div id="game-over-modal" class="modal hidden">
        <div class="modal-content game-over-content">
          <h2>🏆 游戏结束</h2>
          <div id="final-rankings" class="rankings"></div>
          <button id="back-to-lobby-btn" class="btn btn-primary btn-large">返回大厅</button>
        </div>
      </div>
    </div>
    
    <!-- 积分弹窗 -->
    <div id="scores-modal" class="modal hidden">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>📊 当前积分</h2>
        <div id="scores-list" class="scores-list"></div>
      </div>
    </div>
    
    <!-- Toast 消息 -->
    <div id="toast" class="toast hidden"></div>
  </div>
  
  <script src="/socket.io/socket.io.js"></script>
  <script src="game.js"></script>
</body>
</html>
