<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>🍻 在线抽牌喝酒游戏</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">
    <!-- 首页 - 创建/加入房间 -->
    <div id="home-screen" class="screen active">
      <div class="container">
        <h1 class="title">🍻 在线抽牌喝酒游戏</h1>
        <p class="subtitle">在线抽牌喝酒游戏</p>
        
        <div class="input-group">
          <input type="text" id="player-name" placeholder="输入你的昵称" maxlength="10">
        </div>
        
        <div class="button-group">
          <button id="create-room-btn" class="btn btn-primary">创建房间</button>
          <button id="join-room-btn" class="btn btn-secondary">加入房间</button>
        </div>
        
        <div id="join-room-form" class="hidden">
          <div class="input-group">
            <input type="text" id="room-code" placeholder="输入房间号" maxlength="6">
          </div>
          <button id="confirm-join-btn" class="btn btn-primary">确认加入</button>
        </div>
      </div>
    </div>
    
    <!-- 等待室 -->
    <div id="lobby-screen" class="screen">
      <div class="container">
        <div class="room-header">
          <h2>房间号: <span id="room-id-display"></span></h2>
          <button id="copy-room-id" class="btn btn-small">复制</button>
        </div>
        
        <div class="players-section">
          <h3>玩家列表 (<span id="player-count">0</span>/10)</h3>
          <ul id="players-list"></ul>
        </div>
        
        <div id="host-controls" class="hidden">
          <button id="start-game-btn" class="btn btn-primary btn-large">开始游戏</button>
        </div>
        
        <p id="waiting-message" class="info-text">等待房主开始游戏...</p>
      </div>
    </div>
    
    <!-- 游戏界面 -->
    <div id="game-screen" class="screen">
      <div class="game-header">
        <div class="room-info">
          <span>房间: <span id="game-room-id"></span></span>
          <span>第<span id="round-number">1</span>轮</span>
          <span>剩余: <span id="deck-remaining">52</span>张</span>
        </div>
        <div class="game-status">
          <span id="kings-count">👑 0/4</span>
        </div>
      </div>
      
      <!-- 特殊状态显示 -->
      <div id="special-status" class="special-status">
        <div id="miss-holders" class="status-item hidden">
          <span class="status-icon">👸</span>
          <span class="status-text">小姐: <span class="holder-names"></span></span>
        </div>
        <div id="crazy-holders" class="status-item hidden">
          <span class="status-icon">🤪</span>
          <span class="status-text">神经病: <span class="holder-names"></span></span>
        </div>
        <div id="k-rule" class="status-item hidden">
          <span class="status-icon">👑</span>
          <span class="status-text">K规则: <span class="rule-text"></span></span>
        </div>
      </div>
      
      <div class="game-area">
        <!-- 当前抽到的牌 -->
        <div id="current-card-area">
          <div id="card-display" class="card card-back">
            <span class="card-text">?</span>
          </div>
          <div id="card-rule" class="card-rule hidden">
            <h3 id="rule-name"></h3>
            <p id="rule-description"></p>
          </div>
        </div>
        
        <!-- 抽牌信息 -->
        <div id="draw-info">
          <p id="current-turn">等待开始...</p>
          <p id="last-draw"></p>
          <p id="action-message" class="action-message"></p>
        </div>
        
        <!-- 抽牌按钮 -->
        <button id="draw-card-btn" class="btn btn-draw" disabled>抽牌</button>
        
        <!-- K规则输入（抽到K时显示） -->
        <div id="k-rule-input" class="k-rule-input hidden">
          <input type="text" id="k-rule-text" placeholder="输入下一个K的惩罚规则" maxlength="50">
          <button id="set-k-rule-btn" class="btn btn-primary">确定</button>
        </div>
      </div>
      
      <!-- 我的手牌 -->
      <div id="my-hand" class="my-hand">
        <h4>我的手牌</h4>
        <div id="hand-cards" class="hand-cards"></div>
      </div>
      
      <!-- 底部控制栏 -->
      <div class="game-footer">
        <div class="players-bar">
          <div id="game-players-list"></div>
        </div>
        <div id="host-game-controls" class="hidden">
          <button id="shuffle-btn" class="btn btn-secondary">新一轮</button>
        </div>
      </div>
    </div>
    
    <!-- 规则弹窗 -->
    <div id="rules-modal" class="modal hidden">
      <div class="modal-content">
        <span class="close-modal">&times;</span>
        <h2>游戏规则</h2>
        <div class="rules-list">
          <div class="rule-item"><strong>A - 点杀🎯</strong>: 指定任意一人喝酒</div>
          <div class="rule-item"><strong>2 - 小姐牌👸</strong>: 在下一个小姐出现之前陪酒并说"大爷您喝好"（保留手中）</div>
          <div class="rule-item"><strong>3 - 逛三园🦁</strong>: 动物园/水果园/蔬菜园里有什么，轮流说</div>
          <div class="rule-item"><strong>4 - 找人PK⚔️</strong>: 选一人PK，输的喝酒</div>
          <div class="rule-item"><strong>5 - 照相机📷</strong>: 随时喊"照相机"，动的人喝（保留手中）</div>
          <div class="rule-item"><strong>6 - 摸鼻子👃</strong>: 随时摸鼻子，最后一个摸的喝（保留手中）</div>
          <div class="rule-item"><strong>7 - 逢7过7️⃣</strong>: 报数，逢7、7倍数、含7要拍手跳过</div>
          <div class="rule-item"><strong>8 - 厕所牌🚽</strong>: 拥有才能上厕所，可转让（跨轮保留）</div>
          <div class="rule-item"><strong>9 - 自己喝🍺</strong>: 抽到自己喝一杯</div>
          <div class="rule-item"><strong>10 - 神经病🤪</strong>: 所有人不能和你对话（保留手中）</div>
          <div class="rule-item"><strong>J - 上家喝⬆️</strong>: 上一个抽牌的人喝酒</div>
          <div class="rule-item"><strong>Q - 下家喝⬇️</strong>: 下一个抽牌的人喝酒</div>
          <div class="rule-item"><strong>K - 定K规则👑</strong>: 定义下一个K的惩罚，4个K抽完本轮结束</div>
        </div>
      </div>
    </div>
    
    <!-- 选择玩家弹窗 -->
    <div id="player-select-modal" class="modal hidden">
      <div class="modal-content">
        <span class="close-player-select">&times;</span>
        <h2 id="player-select-title">选择玩家</h2>
        <div id="player-select-list" class="player-select-list"></div>
      </div>
    </div>
    
    <!-- 自定义确认弹窗 -->
    <div id="confirm-modal" class="modal hidden">
      <div class="modal-content confirm-modal-content">
        <div class="confirm-icon" id="confirm-icon">❓</div>
        <h2 id="confirm-title">确认</h2>
        <p id="confirm-message">确定要执行此操作吗？</p>
        <div class="confirm-buttons">
          <button id="confirm-cancel-btn" class="btn btn-secondary">取消</button>
          <button id="confirm-ok-btn" class="btn btn-primary">确定</button>
        </div>
      </div>
    </div>
    
    <!-- 自定义提示弹窗 -->
    <div id="alert-modal" class="modal hidden">
      <div class="modal-content alert-modal-content">
        <div class="alert-icon" id="alert-icon">💡</div>
        <h2 id="alert-title">提示</h2>
        <p id="alert-message">这是一条提示消息</p>
        <div class="alert-buttons">
          <button id="alert-ok-btn" class="btn btn-primary">知道了</button>
        </div>
      </div>
    </div>
    
    <!-- 自定义选项弹窗 -->
    <div id="options-modal" class="modal hidden">
      <div class="modal-content options-modal-content">
        <div class="options-icon" id="options-icon">🎯</div>
        <h2 id="options-title">选择操作</h2>
        <p id="options-message">请选择一个选项</p>
        <div id="options-buttons" class="options-buttons"></div>
      </div>
    </div>
    
    <!-- Toast 消息 -->
    <div id="toast" class="toast hidden"></div>
  </div>
  
  <button id="rules-btn" class="rules-float-btn">📜</button>
  
  <script src="/socket.io/socket.io.js"></script>
  <script src="game.js"></script>
</body>
</html>
